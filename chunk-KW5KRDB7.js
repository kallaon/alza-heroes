import{A as s,D as H,E as r,F as j,G as D,H as A,I as V,J as L,L as B,N as F,O,R as q,S as G,T as P,U,V as W,W as z,X as J,Y as K,_,a as T,ba as Q,c as E,ca as b,d as I,da as g,e as M,f as p,g as N,h as w,j as u,k as v,n as d,o as m,p as f,q as C,r as y,v as o,w as i,x as R,y as k,z as h}from"./chunk-R4PFJM3P.js";var c=class t{constructor(n,e,a){this._heroService=n;this._router=e;this._toastService=a}canActivate(n){let e=Number(n.paramMap.get("id"));return this._heroService.getHero(e)?!0:(this._toastService.showToast("Bad hero ID, such Hero does not exists","error"),this._router.createUrlTree(["/"]))}static \u0275fac=function(e){return new(e||t)(p(g),p(_),p(b))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})};function ie(t,n){t&1&&(o(0,"small"),r(1,"Hero name is required."),i())}function oe(t,n){t&1&&(o(0,"small"),r(1,"Hero name must be at least 3 characters."),i())}function re(t,n){t&1&&(o(0,"small"),r(1,"Hero name must be at most 20 characters."),i())}function ne(t,n){if(t&1&&(o(0,"div",24),f(1,ie,2,0,"small")(2,oe,2,0,"small")(3,re,2,0,"small"),i()),t&2){s();let e=H(13);d(),y(e.errors!=null&&e.errors.required?1:e.errors!=null&&e.errors.minlength?2:e.errors!=null&&e.errors.maxlength?3:-1)}}function ae(t,n){if(t&1){let e=k();o(0,"h2",12),r(1),i(),o(2,"div",13)(3,"label",14),r(4,"ID:"),i(),o(5,"div",15)(6,"p",16),r(7),i()()(),o(8,"div",13)(9,"label",17),r(10,"Hero Name:"),i(),o(11,"div",15)(12,"input",18,0),L("ngModelChange",function(l){u(e);let S=s();return V(S.editedHeroName,l)||(S.editedHeroName=l),v(l)}),i(),f(14,ne,4,1,"div",19),i()(),o(15,"div",20)(16,"button",21),h("click",function(){u(e);let l=s();return v(l.onGoBack())}),r(17," Back "),i(),o(18,"button",22),r(19," Delete "),i(),o(20,"button",23),h("click",function(){u(e);let l=s();return v(l.onSave())}),r(21," Save "),i()()}if(t&2){let e=H(13),a=s();d(),D("",a.hero.name," Details"),d(6),j(a.hero.id),d(5),A("ngModel",a.editedHeroName),d(2),C("ngIf",e.invalid&&e.touched),d(6),C("disabled",e.invalid)}}function le(t,n){t&1&&(o(0,"div",1)(1,"h4",25),r(2,"Hero Not Found"),i(),o(3,"p"),r(4,"The hero you are looking for does not exist. Please try another hero."),i()())}var x=class t{constructor(n,e,a,l,S){this._heroService=n;this._route=e;this._router=a;this._location=l;this._toastService=S}hero;editedHeroName="";subscription=new T;ngOnInit(){this._obtainHeroByRouteId()}ngOnDestroy(){this.subscription.unsubscribe()}onGoBack(){this._location.back()}onSave(){this.hero&&(this.hero.name=this.editedHeroName.trim(),this._heroService.updateHero(this.hero))}onDelete(){this.hero&&(this._heroService.deleteHero(this.hero.id),this._router.navigate(["/"]))}_obtainHeroByRouteId(){let n=Number(this._route.snapshot.paramMap.get("id"));this._heroService.getHero(n).pipe(E(1)).subscribe({next:e=>{e?(this.hero=e,this.editedHeroName=e.name):this._router.navigate(["/"])},error:e=>this._toastService.showToast(e.message||"Failed to fetch heroes","error")})}static \u0275fac=function(e){return new(e||t)(m(g),m(K),m(_),m(B),m(b))};static \u0275cmp=N({type:t,selectors:[["app-hero-detail"]],decls:16,vars:2,consts:[["heroName","ngModel"],[1,"alert","alert-warning"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","deleteModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"mb-3"],[1,"row","mb-3","align-items-center"],[1,"col-form-label","col-sm-2"],[1,"col-sm-3"],[1,"form-control-plaintext"],["for","heroName",1,"col-form-label","col-sm-2"],["id","heroName","placeholder","Enter hero name","minlength","3","maxlength","20","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","text-danger",4,"ngIf"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteModal",1,"btn","btn-danger"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"text-danger"],[1,"alert-heading"]],template:function(e,a){e&1&&(f(0,ae,22,5)(1,le,5,0,"div",1),o(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),r(7,"Confirm Deletion"),i(),R(8,"button",7),i(),o(9,"div",8),r(10),i(),o(11,"div",9)(12,"button",10),r(13," Cancel "),i(),o(14,"button",11),h("click",function(){return a.onDelete()}),r(15," Delete "),i()()()()()),e&2&&(y(a.hero?0:1),d(10),D(" Are you sure you want to delete ",a.hero==null?null:a.hero.name,"? "))},dependencies:[F,q,G,U,W,z,P]})};var de=[{path:":id",component:x,canActivate:[c]}],Y=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=w({type:t});static \u0275inj=M({providers:[c],imports:[O,Q.forChild(de),J]})};export{Y as HeroDetailModule};
